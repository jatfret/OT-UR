webpackJsonp([1],{"/mJ1":function(t,e,i){"use strict";e.a={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},"/wcs":function(t,e){},0:function(t,e){},"0fMr":function(t,e,i){"use strict";e.a={props:{section:{type:String,required:!0}}}},"0rsq":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index-page"},[i("ul",[i("li",[i("router-link",{class:{active:"index"===t.section},attrs:{to:"/"}},[t._v("首页")])],1),t._v(" "),i("li",[i("router-link",{class:{active:"list"===t.section},attrs:{to:"/list"}},[t._v("我的列表")])],1)])])},a=[],r={render:n,staticRenderFns:a};e.a=r},"1Io0":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"single-choice",on:{click:function(e){t.switchToEdit(t.topic)}}},[i("div",{staticClass:"single-choice-show"},[i("h3",{staticClass:"topic-title"},[t._v(t._s(t.topicIndex+1)+"."+t._s(t.paperTopic.title))]),t._v(" "),i("ul",t._l(t.paperTopic.options,function(e,n){return i("li",[i("input",{attrs:{type:"radio",id:e.id,name:"paperTitle.id"}}),t._v(" "),i("label",{attrs:{for:e.id}},[t._v(t._s(e.text))])])}))])])},a=[],r={render:n,staticRenderFns:a};e.a=r},"45dn":function(t,e){},"60k8":function(t,e,i){"use strict";function n(t){i("wDEL")}var a=i("g7Em"),r=i("uAVG"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-2a5c62bd",null);e.a=c.exports},"7b1R":function(t,e){},"8Ho+":function(t,e,i){"use strict";function n(t){i("cG2S")}var a=i("u/IF"),r=i("Wzq0"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-52785f81",null);e.a=c.exports},"Drt/":function(t,e){},G5Cd:function(t,e,i){"use strict";var n=i("KBQO");e.a={name:"edit-topic",props:{topic:Object},data:function(){return{editingTopic:this.topic||n.a.getSingleChoice()}},methods:{addOption:function(){this.editingTopic.options.push({text:"选项"})},deleteOption:function(t){this.editingTopic.options.splice(t,1)},savePaperTopic:function(t){this.$emit("savePaperTopic",t)},cancelEditing:function(){this.$emit("cancelTopicEditing")}}}},GKmE:function(t,e,i){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}i.d(e,"a",function(){return n})},Gc5V:function(t,e,i){"use strict";function n(t){i("ZvXf")}var a=i("G5Cd"),r=i("HHI7"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-7809f46e",null);e.a=c.exports},HHI7:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new-topic"},[i("form",[i("p",[i("label",[t._v("题目:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingTopic.title,expression:"editingTopic.title"}],staticClass:"title",attrs:{type:"text",required:""},domProps:{value:t.editingTopic.title},on:{input:function(e){e.target.composing||(t.editingTopic.title=e.target.value)}}})]),t._v(" "),i("p",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.editingTopic.type,expression:"editingTopic.type"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.editingTopic.type=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"SingleChoice"}},[t._v("单选")])])]),t._v(" "),t._l(t.editingTopic.options,function(e,n){return i("p",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"option.text"}],staticClass:"option",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),t._v(" "),i("span",{staticClass:"delete-option",on:{click:function(e){t.deleteOption(n)}}},[t._v("×")])])}),t._v(" "),i("p",[i("input",{staticClass:"new-option",attrs:{type:"button",value:"新建选项"},on:{click:t.addOption}})]),t._v(" "),i("div",{staticClass:"actions"},[i("input",{staticClass:"btn btn-info",attrs:{type:"submit",value:"保存"},on:{click:function(e){t.savePaperTopic(t.editingTopic)}}}),t._v(" "),i("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"取消"},on:{click:t.cancelEditing}})])],2)])},a=[],r={render:n,staticRenderFns:a};e.a=r},Hff1:function(t,e,i){"use strict";e.a={name:"single-choice",props:{topic:Object,topicIndex:Number},data:function(){return{paperTopic:this.topic}},watch:{topic:function(t){this.paperTopic=t}},methods:{switchToEdit:function(t){this.$emit("switchToEdit",t.id)}}}},I9F0:function(t,e,i){"use strict";function n(t){i("p0ty")}var a=i("uzpW"),r=i("d5SX"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-61c086ed",null);e.a=c.exports},KBQO:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("GKmE"),a={title:"试卷标题",description:"为了给您提供更好的服务，希望您能抽出几分钟时间，将您的感受和建议告诉我们，我们非常重视每位用户的宝贵意见,期待您的参与！现在我们就马上开始吧！",getSingleChoice:function(){return{id:i.i(n.a)(),title:"",type:"SingleChoice",options:[{id:i.i(n.a)(),text:"选项"},{id:i.i(n.a)(),text:"选项"}]}}}},M93x:function(t,e,i){"use strict";function n(t){i("7b1R")}var a=i("xJD8"),r=i("VJkn"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,null,null);e.a=c.exports},"N+Ij":function(t,e,i){"use strict";function n(t){i("Drt/")}var a=i("/mJ1"),r=i("Nm2K"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-06f0205f",null);e.a=c.exports},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a=i("M93x"),r=i("YaEn");n.a.config.productionTip=!1,new n.a({el:"#app",router:r.a,template:"<App/>",components:{App:a.a}})},Nm2K:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v(t._s(t.msg))]),t._v(" "),i("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),i("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),i("br"),t._v(" "),i("li",[i("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[t._v("vue-router")])]),t._v(" "),i("li",[i("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[t._v("vuex")])]),t._v(" "),i("li",[i("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[t._v("vue-loader")])]),t._v(" "),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}],r={render:n,staticRenderFns:a};e.a=r},OPVD:function(t,e,i){"use strict";function n(t){i("RQyB")}var a=i("0fMr"),r=i("0rsq"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-cd4ebc06",null);e.a=c.exports},RQyB:function(t,e){},"UJ3+":function(t,e,i){"use strict";function n(t){i("/wcs")}var a=i("Hff1"),r=i("1Io0"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-2d7b3e35",null);e.a=c.exports},VJkn:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("transition",{attrs:{name:"slide"}},[i("router-view")],1)],1)},a=[],r={render:n,staticRenderFns:a};e.a=r},Wzq0:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("navigator",{attrs:{section:"list"}}),t._v(" "),i("div",{staticClass:"list-page"},[i("div",{staticClass:"header"},[i("router-link",{staticClass:"btn btn-important",attrs:{to:{name:"edit"}}},[t._v("\n        新建\n      ")])],1),t._v(" "),t.list.length?i("div",[i("table",[t._m(0),t._v(" "),i("tbody",t._l(t.list,function(e,n){return i("tr",{key:e._id},[i("td",[t._v(t._s(n+1))]),t._v(" "),i("td",[t._v(t._s(e.title))]),t._v(" "),i("td",[t._v(t._s(e.created_at))]),t._v(" "),i("td",[i("router-link",{staticClass:"btn btn-info",attrs:{to:{name:"edit",params:{id:e._id}}}},[t._v("\n                编辑\n              ")]),t._v(" "),i("button",{staticClass:"btn btn-primary",on:{click:function(i){t.deletePaper(e._id)}}},[t._v("删除")])],1)])}))])]):t._e()])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("序号")]),t._v(" "),i("th",[t._v("标题")]),t._v(" "),i("th",[t._v("创建时间")]),t._v(" "),i("th",[t._v("操作")])])])}],r={render:n,staticRenderFns:a};e.a=r},YCp8:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("navigator",{attrs:{section:"index"}}),t._v(" "),t._m(0)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index-page"},[i("h3",[t._v("首页")])])}],r={render:n,staticRenderFns:a};e.a=r},YaEn:function(t,e,i){"use strict";var n=i("7+uW"),a=i("/ocq"),r=i("N+Ij"),o=i("rASM"),s=i("8Ho+"),c=i("I9F0");n.a.use(a.a),e.a=new a.a({routes:[{path:"/",name:"index",component:o.a},{path:"/hello",name:"hello",component:r.a},{path:"/list",name:"list",component:s.a},{path:"/edit/:id?",name:"edit",component:c.a}]})},ZWvd:function(t,e,i){"use strict";function n(t){i("45dn")}var a=i("oOh+"),r=i("hnrC"),o=i("VU/8"),s=n,c=o(a.a,r.a,s,"data-v-6c4f7f8c",null);e.a=c.exports},ZvXf:function(t,e){},cBon:function(t,e,i){"use strict";var n=i("OPVD");e.a={name:"index",components:{Navigator:n.a}}},cG2S:function(t,e){},d5SX:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout-wrapper"},[i("navigator",{attrs:{section:"edit"}}),t._v(" "),i("div",{staticClass:"edit-page"},[i("div",{staticClass:"main-content"},[i("div",{staticClass:"paper-wrapper"},[i("paper-header",{attrs:{title:t.paper.title,description:t.paper.description},on:{paperHeaderChange:t.paperHeaderChange}}),t._v(" "),t._l(t.paper.topics,function(e,n){return i("div",{staticClass:"topic-wrapper"},[t.topicEditingID===e.id?i("edit-topic",{attrs:{topic:e},on:{savePaperTopic:t.savePaperTopic,cancelTopicEditing:t.cancelTopicEditing}}):i("single-choice",{attrs:{topic:e,topicIndex:n},on:{switchToEdit:t.switchToEdit}}),t._v(" "),i("span",{staticClass:"delete-topic",on:{click:function(i){t.deletePaperTopic(e.id)}}},[t._v("×")])],1)}),t._v(" "),t.topicAdding?i("div",{staticClass:"add-wrapper"},[i("edit-topic",{on:{savePaperTopic:t.savePaperTopic,cancelTopicEditing:t.cancelTopicEditing}})],1):t._e(),t._v(" "),i("add-topic-button",{on:{addPaperTopic:t.addPaperTopic}})],2)])])],1)},a=[],r={render:n,staticRenderFns:a};e.a=r},g7Em:function(t,e,i){"use strict";e.a={name:"paper-header",props:{title:String,description:String},data:function(){return{paperTitle:this.title,paperDescription:this.description}},watch:{title:function(t){this.paperTitle=t},description:function(t){this.paperDescription=t}},methods:{paperHeaderChange:function(){this.$emit("paperHeaderChange",this.paperTitle,this.paperDescription)}}}},hnrC:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"add-topic-button",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addPaperTopic(e)}}},[t._v("+")])},a=[],r={render:n,staticRenderFns:a};e.a=r},"oOh+":function(t,e,i){"use strict";e.a={name:"add-topic-buttn",methods:{addPaperTopic:function(){this.$emit("addPaperTopic")}}}},p0ty:function(t,e){},pyzA:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={path:"",socketHost:"http://120.77.36.131:3000"}},rASM:function(t,e,i){"use strict";var n=i("cBon"),a=i("YCp8"),r=i("VU/8"),o=r(n.a,a.a,null,null,null);e.a=o.exports},"u/IF":function(t,e,i){"use strict";var n=i("mvHQ"),a=i.n(n),r=i("pyzA"),o=i("OPVD");e.a={name:"list",components:{Navigator:o.a},data:function(){return{list:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;fetch(r.a.path+"/paper/getPaperList",{method:"get",mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.list=e.data.papers}).catch(function(t){alert(t)})},deletePaper:function(t){var e=this;fetch(r.a.path+"/paper/deletePaper",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:a()({id:t})}).then(function(t){return t.json()}).then(function(i){var n=void 0;e.list.forEach(function(e,i){e._id===t&&(n=i)}),e.list.splice(n,1)})}}}},uAVG:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"paper-header"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.paperTitle,expression:"paperTitle"}],staticClass:"paper-title",attrs:{type:"text",required:""},domProps:{value:t.paperTitle},on:{change:function(e){e.stopPropagation(),e.preventDefault(),t.paperHeaderChange(e)},input:function(e){e.target.composing||(t.paperTitle=e.target.value)}}}),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.paperDescription,expression:"paperDescription"}],staticClass:"paper-description",attrs:{type:"text"},domProps:{value:t.paperDescription},on:{change:function(e){e.stopPropagation(),e.preventDefault(),t.paperHeaderChange(e)},input:function(e){e.target.composing||(t.paperDescription=e.target.value)}}})])},a=[],r={render:n,staticRenderFns:a};e.a=r},uzpW:function(t,e,i){"use strict";var n=i("mvHQ"),a=i.n(n),r=i("M4fF"),o=i.n(r),s=i("DmT9"),c=i.n(s),p=i("pyzA"),u=i("OPVD"),d=i("Gc5V"),l=i("ZWvd"),v=i("60k8"),f=i("UJ3+"),h=i("KBQO");e.a={name:"edit",components:{Navigator:u.a,EditTopic:d.a,AddTopicButton:l.a,PaperHeader:v.a,SingleChoice:f.a},data:function(){return{socket:c.a.connect(""+p.a.socketHost,{forceNew:!0}),id:this.$route.params.id,topicAdding:!1,topicEditingID:null,isNew:void 0===this.$route.params.id,paper:{title:h.a.title,description:h.a.description,topics:[]}}},mounted:function(){var t=this;this.isNew||this.fetchPaper(),this.socket.on("updateSuccess",function(e){console.log("received updated message:",e),e.data.status&&(console.log(t.id,e.data.paper._id),t.id===e.data.paper._id&&(t.paper=e.data.paper))})},methods:{getpaperJSON:function(){var t=o.a.cloneDeep(this.paper);return a()(t)},fetchPaper:function(){var t=this,e=p.a.path+"/paper/getPaper?id="+this.id;fetch(e,{method:"get",mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.paper=e.data.paper}).catch(function(t){alert(t)})},addPaperTopic:function(){this.topicAdding=!0},switchToEdit:function(t){this.topicEditingID=t},savePaperTopic:function(t){if(this.topicAdding)this.paper.topics.push(t);else{var e=void 0;this.paper.topics.filter(function(i,n){if(i.id===t.id)return e=n,!0}),this.paper.topics.splice(e,1,t)}this.savePaper()},deletePaperTopic:function(t){var e=void 0;this.paper.topics.filter(function(i,n){if(i.id===t.id)return e=n,!0}),this.paper.topics.splice(e,1),this.savePaper()},cancelTopicEditing:function(){console.log("cancel"),this.topicAdding=!1,this.topicEditingID=null},paperHeaderChange:function(t,e){this.paper.title=t,this.paper.description=e,this.savePaper()},createPaper:function(){return fetch(p.a.path+"/paper/createPaper",{method:"post",mode:"cors"})},updatePaper:function(t){var e=this;console.log(t),fetch(p.a.path+"/paper/updatePaper",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:t}).then(function(t){return t.json()}).then(function(t){e.topicAdding=!1,e.topicEditingID=null,e.isNew||e.socket.emit("updatePaper",{id:e.id}),e.isNew=!1}).catch(function(t){alert(t)})},savePaper:function(){var t=this;if(this.isNew)this.createPaper().then(function(t){return t.json()}).then(function(e){t.$router.push({name:"edit",params:{id:e.data.id}}),t.id=e.data.id,t.paper.id=e.data.id;var i=t.getpaperJSON();t.updatePaper(i)});else{var e=this.getpaperJSON();this.updatePaper(e)}}}}},wDEL:function(t,e){},xJD8:function(t,e,i){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.caf8cbc15c173199911c.js.map